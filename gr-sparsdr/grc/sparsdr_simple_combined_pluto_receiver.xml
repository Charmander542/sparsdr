<?xml version="1.0"?>
<block>
  <name>Simple Combined Pluto Receiver</name>
  <!-- The variable_ prefix is required to generate code from the var_make
  template -->
  <key>variable_sparsdr_simple_combined_pluto_receiver</key>
  <category>[SparSDR]</category>
  <import>import sparsdr</import>
  <import>import distutils.spawn</import>
  <var_make>
$(id)_bands = sparsdr.simple_band_spec_vector()
#if $band_count() > 0
$(id)_bands.push_back(sparsdr.simple_band_spec($band_0_frequency, $band_0_bandwidth))
#end if
#if $band_count() > 1
$(id)_bands.push_back(sparsdr.simple_band_spec($band_1_frequency, $band_1_bandwidth))
#end if
#if $band_count() > 2
$(id)_bands.push_back(sparsdr.simple_band_spec($band_2_frequency, $band_2_bandwidth))
#end if
#if $band_count() > 3
$(id)_bands.push_back(sparsdr.simple_band_spec($band_3_frequency, $band_3_bandwidth))
#end if
#if $band_count() > 4
$(id)_bands.push_back(sparsdr.simple_band_spec($band_4_frequency, $band_4_bandwidth))
#end if
#if $band_count() > 5
$(id)_bands.push_back(sparsdr.simple_band_spec($band_5_frequency, $band_5_bandwidth))
#end if
#if $band_count() > 6
$(id)_bands.push_back(sparsdr.simple_band_spec($band_6_frequency, $band_6_bandwidth))
#end if
#if $band_count() > 7
$(id)_bands.push_back(sparsdr.simple_band_spec($band_7_frequency, $band_7_bandwidth))
#end if
#if $band_count() > 8
$(id)_bands.push_back(sparsdr.simple_band_spec($band_8_frequency, $band_8_bandwidth))
#end if
#if $band_count() > 9
$(id)_bands.push_back(sparsdr.simple_band_spec($band_9_frequency, $band_9_bandwidth))
#end if
#if $band_count() > 10
$(id)_bands.push_back(sparsdr.simple_band_spec($band_10_frequency, $band_10_bandwidth))
#end if
#if $band_count() > 11
$(id)_bands.push_back(sparsdr.simple_band_spec($band_11_frequency, $band_11_bandwidth))
#end if
#if $band_count() > 12
$(id)_bands.push_back(sparsdr.simple_band_spec($band_12_frequency, $band_12_bandwidth))
#end if
#if $band_count() > 13
$(id)_bands.push_back(sparsdr.simple_band_spec($band_13_frequency, $band_13_bandwidth))
#end if
#if $band_count() > 14
$(id)_bands.push_back(sparsdr.simple_band_spec($band_14_frequency, $band_14_bandwidth))
#end if
#if $band_count() > 15
$(id)_bands.push_back(sparsdr.simple_band_spec($band_15_frequency, $band_15_bandwidth))
#end if
#if $band_count() > 16
$(id)_bands.push_back(sparsdr.simple_band_spec($band_16_frequency, $band_16_bandwidth))
#end if
#if $band_count() > 17
$(id)_bands.push_back(sparsdr.simple_band_spec($band_17_frequency, $band_17_bandwidth))
#end if
#if $band_count() > 18
$(id)_bands.push_back(sparsdr.simple_band_spec($band_18_frequency, $band_18_bandwidth))
#end if
#if $band_count() > 19
$(id)_bands.push_back(sparsdr.simple_band_spec($band_19_frequency, $band_19_bandwidth))
#end if
#if $band_count() > 20
$(id)_bands.push_back(sparsdr.simple_band_spec($band_20_frequency, $band_20_bandwidth))
#end if
#if $band_count() > 21
$(id)_bands.push_back(sparsdr.simple_band_spec($band_21_frequency, $band_21_bandwidth))
#end if
#if $band_count() > 22
$(id)_bands.push_back(sparsdr.simple_band_spec($band_22_frequency, $band_22_bandwidth))
#end if
#if $band_count() > 23
$(id)_bands.push_back(sparsdr.simple_band_spec($band_23_frequency, $band_23_bandwidth))
#end if
#if $band_count() > 24
$(id)_bands.push_back(sparsdr.simple_band_spec($band_24_frequency, $band_24_bandwidth))
#end if
#if $band_count() > 25
$(id)_bands.push_back(sparsdr.simple_band_spec($band_25_frequency, $band_25_bandwidth))
#end if
#if $band_count() > 26
$(id)_bands.push_back(sparsdr.simple_band_spec($band_26_frequency, $band_26_bandwidth))
#end if
#if $band_count() > 27
$(id)_bands.push_back(sparsdr.simple_band_spec($band_27_frequency, $band_27_bandwidth))
#end if
#if $band_count() > 28
$(id)_bands.push_back(sparsdr.simple_band_spec($band_28_frequency, $band_28_bandwidth))
#end if
#if $band_count() > 29
$(id)_bands.push_back(sparsdr.simple_band_spec($band_29_frequency, $band_29_bandwidth))
#end if
#if $band_count() > 30
$(id)_bands.push_back(sparsdr.simple_band_spec($band_30_frequency, $band_30_bandwidth))
#end if
#if $band_count() > 31
$(id)_bands.push_back(sparsdr.simple_band_spec($band_31_frequency, $band_31_bandwidth))
#end if
self.$(id) = $id = sparsdr.simple_combined_pluto_receiver(uri=$uri, buffer_size=$buffer_size, center_frequency=$frequency, bands=$(id)_bands, threshold=$threshold, reconstruct_path=distutils.spawn.find_executable($reconstruct_path), zero_gaps=$zero_gaps)
  </var_make>
  <make></make>

  <param>
    <name>IIO context URI</name>
    <key>uri</key>
    <value>ip:192.168.2.1</value>
    <type>string</type>
  </param>
  <param>
    <name>Center frequency</name>
    <key>frequency</key>
    <value>2412000000</value>
    <type>int</type>
  </param>
  <param>
    <name>Gain</name>
    <key>gain</key>
    <value>60</value>
    <type>float</type>
  </param>
  <param>
    <name>Buffer size (samples)</name>
    <key>buffer_size</key>
    <value>1024 * 1024</value>
    <type>int</type>
  </param>
  <param>
    <name>Shift amount</name>
    <key>shift_amount</key>
    <value>6</value>
    <type>int</type>
  </param>
  <param>
    <name>Threshold</name>
    <key>threshold</key>
    <value>1000</value>
    <type>int</type>
  </param>

  <!-- Path to the sparsdr_reconstruct executable -->
  <param>
    <name>Executable</name>
    <key>reconstruct_path</key>
    <value>sparsdr_reconstruct</value>
    <type>string</type>
    <tab>Reconstruct</tab>
  </param>

  <param>
    <name>Zero samples in gaps</name>
    <key>zero_gaps</key>
    <value>False</value>
    <type>enum</type>
    <option><name>True</name><key>True</key></option>
    <option><name>False</name><key>False</key></option>
    <tab>Reconstruct</tab>
  </param>
  <!-- Number of bands -->
  <param>
    <name>Number of bands</name>
    <key>band_count</key>
    <value>1</value>
    <type>int</type>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 0 frequency</name>
    <key>band_0_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 0 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 0 bandwidth</name>
    <key>band_0_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 0 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 1 frequency</name>
    <key>band_1_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 1 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 1 bandwidth</name>
    <key>band_1_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 1 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 2 frequency</name>
    <key>band_2_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 2 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 2 bandwidth</name>
    <key>band_2_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 2 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 3 frequency</name>
    <key>band_3_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 3 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 3 bandwidth</name>
    <key>band_3_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 3 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 4 frequency</name>
    <key>band_4_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 4 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 4 bandwidth</name>
    <key>band_4_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 4 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 5 frequency</name>
    <key>band_5_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 5 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 5 bandwidth</name>
    <key>band_5_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 5 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 6 frequency</name>
    <key>band_6_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 6 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 6 bandwidth</name>
    <key>band_6_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 6 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 7 frequency</name>
    <key>band_7_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 7 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 7 bandwidth</name>
    <key>band_7_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 7 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 8 frequency</name>
    <key>band_8_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 8 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 8 bandwidth</name>
    <key>band_8_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 8 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 9 frequency</name>
    <key>band_9_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 9 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 9 bandwidth</name>
    <key>band_9_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 9 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 10 frequency</name>
    <key>band_10_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 10 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 10 bandwidth</name>
    <key>band_10_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 10 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 11 frequency</name>
    <key>band_11_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 11 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 11 bandwidth</name>
    <key>band_11_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 11 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 12 frequency</name>
    <key>band_12_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 12 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 12 bandwidth</name>
    <key>band_12_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 12 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 13 frequency</name>
    <key>band_13_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 13 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 13 bandwidth</name>
    <key>band_13_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 13 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 14 frequency</name>
    <key>band_14_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 14 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 14 bandwidth</name>
    <key>band_14_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 14 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 15 frequency</name>
    <key>band_15_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 15 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 15 bandwidth</name>
    <key>band_15_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 15 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 16 frequency</name>
    <key>band_16_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 16 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 16 bandwidth</name>
    <key>band_16_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 16 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 17 frequency</name>
    <key>band_17_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 17 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 17 bandwidth</name>
    <key>band_17_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 17 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 18 frequency</name>
    <key>band_18_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 18 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 18 bandwidth</name>
    <key>band_18_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 18 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 19 frequency</name>
    <key>band_19_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 19 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 19 bandwidth</name>
    <key>band_19_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 19 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 20 frequency</name>
    <key>band_20_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 20 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 20 bandwidth</name>
    <key>band_20_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 20 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 21 frequency</name>
    <key>band_21_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 21 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 21 bandwidth</name>
    <key>band_21_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 21 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 22 frequency</name>
    <key>band_22_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 22 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 22 bandwidth</name>
    <key>band_22_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 22 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 23 frequency</name>
    <key>band_23_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 23 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 23 bandwidth</name>
    <key>band_23_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 23 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 24 frequency</name>
    <key>band_24_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 24 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 24 bandwidth</name>
    <key>band_24_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 24 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 25 frequency</name>
    <key>band_25_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 25 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 25 bandwidth</name>
    <key>band_25_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 25 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 26 frequency</name>
    <key>band_26_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 26 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 26 bandwidth</name>
    <key>band_26_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 26 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 27 frequency</name>
    <key>band_27_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 27 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 27 bandwidth</name>
    <key>band_27_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 27 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 28 frequency</name>
    <key>band_28_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 28 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 28 bandwidth</name>
    <key>band_28_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 28 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 29 frequency</name>
    <key>band_29_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 29 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 29 bandwidth</name>
    <key>band_29_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 29 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 30 frequency</name>
    <key>band_30_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 30 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 30 bandwidth</name>
    <key>band_30_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 30 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 31 frequency</name>
    <key>band_31_frequency</key>
    <value>2.426e9</value>
    <type>real</type>
    <hide>#if $band_count() > 31 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>
  <param>
    <name>Band 31 bandwidth</name>
    <key>band_31_bandwidth</key>
    <value>2e6</value>
    <type>real</type>
    <hide>#if $band_count() > 31 then 'none' else 'all'#</hide>
    <tab>Bands</tab>
  </param>




  <check>32 >= $band_count</check>
  <check>$band_count > 0</check>

  <source>
    <name>out</name>
    <type>complex</type>
    <nports>$band_count</nports>
  </source>
</block>
